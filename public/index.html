<!DOCTYPE >

<html>
  <head>
    <title>Live Stream From the Browser</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="icon.ico" />
  </head>
  <body style="max-width: 1600px; height: 100%; margin: auto;">
    <header class="header">
      <h1>
        Start a Live Stream!
      </h1>
    </header>
    <h2>
      To start a live stream:
      <ul>
        <li>
          Choose the size of the video you are uploading. Big is awesome, but
          too big, and the server cannot transcode the video fast enough.
        </li>
        <li>
          Enter the RTMP Destination for your api.video stream. You'll find this
          at by clicking on your
          <a href="https://go.api.video/livestreams/">livestream</a>.<br />
        </li>
        <li>When you are ready press "Start Streaming."</li>
      </ul>
    </h2>
    <hr />
    <br /><label for="option_width" class="form">Size:</label>
    <input class="form" type="text" id="option_width" value="240" /> &times;
    <input class="form" type="text" id="option_height" value="240" />
    <br /><br />
    <label class="form" for="option_framerate">Frame Rate:</label>
    <input class="form" type="text" id="option_framerate" value="15" />
    <br /><br />
    <label class="form" for="option_framerate">Audio bitrate:</label>
    <select class="form" id="option_bitrate">
      <option value="22050">22050</option>
      <option value="44100">44100</option>
      <option value="11025">11025</option>
    </select>
    <br /><br />
    <input class="form" type="hidden" id="socket.io_address" value="/" />
    <label class="form" for="option_url">RTMP Destination:</label>
    <input
      class="form"
      type="text"
      id="option_url"
      style="width: 33%;"
      value="rtmp://broadcast.api.video/s/857521da-9d49-4610-b7ba-567124683c3a"
    />
    <br />
    <input
      class="form"
      type="checkbox"
      style="display: none;"
      id="checkbox_Reconection"
      checked="true"
    />
    <label class="form" style="display: none;">Reconnection </label>
    <br />
    <div class="form">
      Connect the server, then start streaming.
    </div>
    <br />
    <button class="form" id="button_server">Connect Server</button>
    <button class="form" id="button_start">Start Streaming</button>
    <button class="form" id="button_stop">Stop Streaming</button>

    <br />
    <hr />

    <h2>
      Hint: Keep an eye on the status window, the encoding value must stay above
      1x, or your stream will start to lag. Use a smaller screen size, or change
      the frame rate in the Constraints variable.
    </h2>

    <div>
      <p id="output_message"></p>

      <video id="output_video" autoplay="true"></video>
      <svg id="recording" height="50" width="50">
        <circle
          id="recordingCircle"
          cx="25"
          cy="25"
          r="20"
          stroke="black"
          stroke-width="1"
          fill="gray"
        />
      </svg>
      <video id="videoElement" preload="none"></video>
    </div>

    <textarea
      readonly="true"
      id="output_console"
      cols="180"
      rows="15"
    ></textarea>

    <script src="socket.io.js"></script>
    <script src="livestream.js"></script>
  </body>
</html>
